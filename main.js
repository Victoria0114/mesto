(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var n=function(){function t(e){var n=e.baseUrl,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._headers=r}var n,r;return n=t,(r=[{key:"_checkResponse",value:function(t){return t.ok?t.json():Promise.reject("".concat(t.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"patchUserInfo",value:function(t){var e=t.name,n=t.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:n})}).then(this._checkResponse)}},{key:"patchAvatar",value:function(t){var e=t.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}},{key:"getCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"postCard",value:function(t){var e=t.name,n=t.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:n})}).then(this._checkResponse)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"putLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"deleteLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._container.append(e._renderer(t))}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===a(o)?o:String(o)),r)}var o}var c=function(){function t(e,n,r,o,i){var a=i.handleLikeClick,u=i.handleDeleteClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._likes=e.likes,this._cardId=e._id,this._ownerId=e.owner._id,this._userId=n,this._templateSelector=r,this._handleCardClick=o,this._handleLikeClick=a,this._handleDeleteClick=u}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}},{key:"putLike",value:function(t){this._likeCounter.textContent=t.length,this._buttonLike.classList.add("card__like_active"),this._isLiked=!0}},{key:"deleteLike",value:function(t){this._likeCounter.textContent=t.length,this._buttonLike.classList.remove("card__like_active"),this._isLiked=!1}},{key:"deleteCard",value:function(){this._card.remove(),this._card=null}},{key:"_setEventListeners",value:function(){var t=this;this._buttonLike.addEventListener("click",(function(){t._handleLikeClick(t._cardId,t._isLiked)})),this._buttonDelete.addEventListener("click",(function(){t._handleDeleteClick(t._cardId)})),this._cardImage.addEventListener("click",(function(){t._handleCardClick(t._cardImage.src,t._cardImage.alt)}))}},{key:"generateCard",value:function(){var t=this;return this._card=this._getTemplate(),this._cardImage=this._card.querySelector(".card__image"),this._cardName=this._card.querySelector(".card__mesto"),this._buttonLike=this._card.querySelector(".card__like"),this._buttonDelete=this._card.querySelector(".card__trashbin"),this._likeCounter=this._card.querySelector(".card__like-counter"),this._likeCounter.textContent=this._likes.length,this._likes.some((function(e){return e._id===t._ownerId}))?(this._isLiked=!0,this._buttonLike.classList.add("card__like_active")):(this._isLiked=!1,this._buttonLike.classList.remove("card__like_active")),this._ownerId!==this._userId&&this._buttonDelete.remove(),this._setEventListeners(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardName.textContent=this._name,this._card}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close"))&&t.close()}))}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},h.apply(this,arguments)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v(r);if(o){var n=v(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._handleSubmitForm=e,n._inputList=n._popup.querySelectorAll(".popup__edit-form"),n._form=n._popup.querySelector(".popup__form"),n._buttonSubmit=n._form.querySelector(".popup__save"),n._initialButtonText=n._buttonSubmit.textContent,n}return e=a,(n=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this;h(v(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._handleSubmitForm(t._getInputValues())}))}},{key:"close",value:function(){h(v(a.prototype),"close",this).call(this),this._form.reset()}},{key:"renderLoading",value:function(t){this._buttonSubmit.textContent=t?"Сохранение...":this._initialButtonText}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(f);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(this,arguments)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=k(r);if(o){var n=k(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._image=e._popup.querySelector(".popup__image"),e._place=e._popup.querySelector(".popup__place"),e}return e=a,(n=[{key:"open",value:function(t,e){this._image.src=t,this._image.alt=e,this._place.textContent=e,g(k(a.prototype),"open",this).call(this)}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(f);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===E(o)?o:String(o)),r)}var o}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},j.apply(this,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=C(r);if(o){var n=C(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._form=e._popup.querySelector(".popup__form"),e}return e=a,(n=[{key:"handleSubmit",value:function(t){this._submitHandler=t}},{key:"setEventListeners",value:function(){var t=this;j(C(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._submitHandler()}))}}])&&L(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(f);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===I(o)?o:String(o)),r)}var o}var R=function(){function t(e){var n=e.userNameSelector,r=e.userAboutSelector,o=e.userAvatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userName=document.querySelector(n),this._userAbout=document.querySelector(r),this._userAvatar=document.querySelector(o)}var e,n;return e=t,n=[{key:"getUserInfo",value:function(){var t={};return t.name=this._userName.textContent,t.about=this._userAbout.textContent,t}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about,r=t.avatar;this._userName.textContent=e,this._userAbout.textContent=n,this._userAvatar.src=r}},{key:"setUserAvatar",value:function(t){var e=t.avatar;this._userAvatar.src=e}}],n&&T(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===q(o)?o:String(o)),r)}var o}var U,B=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.textContent=t.validationMessage,e.classList.add(this._errorClass),t.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));e.textContent="",e.classList.remove(this._errorClass),t.classList.remove(this._inputErrorClass)}},{key:"_isValid",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}},{key:"_enableButton",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled")}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():this._enableButton()}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._isValid(e),t._toggleButtonState()}))})),this._formElement.addEventListener("submit",(function(t){t.preventDefault()}))}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach((function(e){t._hideInputError(e)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&A(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),x={formSelector:".popup__form",inputSelector:".popup__edit-form",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"popup__edit-form_type_error",errorClass:"popup__span_error"},D=document.querySelector(".profile__edit-button"),V=document.querySelector(".profile__add-button"),N=document.querySelector(".profile__avatar-button"),H=document.forms["form-edit-profile"],J=document.forms["form-add-card"],F=document.forms["form-avatar"];function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var M=new n({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-64",headers:{authorization:"a7212cbe-3b54-4bb6-93d8-5cfe2a3625ad","Content-Type":"application/json"}});Promise.all([M.getUserInfo(),M.getCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,n)||function(t,e){if(t){if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];U=o._id,console.log(Q.renderItems(i)),console.log(K.setUserInfo(o)),K.setUserInfo(o),Q.renderItems(i)})).catch((function(t){console.log("Ошибка: ".concat(t))}));var z=function(t,e){tt.open(t,e)},$=function(t){var e=new c(t,U,"#card-template",z,{handleLikeClick:function(t,n){n?M.deleteLike(t).then((function(t){e.deleteLike(t.likes)})).catch((function(t){console.log("Ошибка: ".concat(t))})):M.putLike(t).then((function(t){e.putLike(t.likes)})).catch((function(t){console.log("Ошибка: ".concat(t))}))},handleDeleteClick:function(t){Y.open(),Y.handleSubmit((function(){M.deleteCard(t).then((function(t){e.deleteCard(t._id),Y.close()})).catch((function(t){console.log("Ошибка: ".concat(t))}))}))}});return e.generateCard()},K=new R(".profile__name",".profile__about",".profile__avatar"),Q=new i({renderer:$},".cards"),W=new b(".popup_type_edit-profile",(function(t){W.renderLoading(!0),M.patchUserInfo(t).then((function(t){K.setUserInfo(t),W.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){W.renderLoading(!1)}))})),X=new b(".popup_type_avatar",(function(t){X.renderLoading(!0),M.patchAvatar(t).then((function(t){K.setUserAvatar(t),X.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){X.renderLoading(!1)}))})),Y=new P(".popup_type_delete-card"),Z=new b(".popup_type_new-place",(function(t){Z.renderLoading(!0),M.postCard(t).then((function(t){Q.addItem($(t)),Z.close()})).catch((function(t){console.log("Ошибка: ".concat(t))})).finally((function(){Z.renderLoading(!1)}))})),tt=new w(".popup_type_image"),et=new B(x,H),nt=new B(x,J),rt=new B(x,F);et.enableValidation(),nt.enableValidation(),rt.enableValidation(),D.addEventListener("click",(function(){var t=K.getUserInfo(),e=t.name,n=t.about;console.log("1"),H.name.value=e,console.log("2"),H.about.value=n,et.resetValidation(),W.open()})),V.addEventListener("click",(function(){nt.resetValidation(),Z.open()})),N.addEventListener("click",(function(){rt.resetValidation(),X.open()})),W.setEventListeners(),X.setEventListeners(),Y.setEventListeners(),Z.setEventListeners(),tt.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGjQoW9uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG4gIFxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIHBhdGNoVXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXRcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG4gIFxuICBwYXRjaEF2YXRhcih7IGF2YXRhciB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhclxuICAgICAgfSlcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXG4gIH1cblxuICBnZXRDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIHBvc3RDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBsaW5rXG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIHB1dExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxufSIsIi8v0KHQstC+0LnRgdGC0LLQviBpdGVtcyDigJQg0Y3RgtC+INC80LDRgdGB0LjQsiDQtNCw0L3QvdGL0YUsIFxuLy/QutC+0YLQvtGA0YvQtSDQvdGD0LbQvdC+INC00L7QsdCw0LLQuNGC0Ywg0L3QsCDRgdGC0YDQsNC90LjRhtGDINC/0YDQuCDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuCDQutC70LDRgdGB0LAuIFxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgLy90aGlzLl9jb250YWluZXIgPSBjb250YWluZXJTZWxlY3RvcjtcblxuICB9XG5cbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoY2FyZERhdGEsIHVzZXJJZCwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCB7IGhhbmRsZUxpa2VDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2sgfSkge1xuICAgICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcbiAgICAgIHRoaXMuX2xpa2VzID0gY2FyZERhdGEubGlrZXM7XG4gICAgICB0aGlzLl9jYXJkSWQgPSBjYXJkRGF0YS5faWQ7XG4gICAgICB0aGlzLl9vd25lcklkID0gY2FyZERhdGEub3duZXIuX2lkO1xuICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgIH1cblxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmNhcmQnKVxuICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICAgIH1cblxuICAgIHB1dExpa2UobGlrZXNBcnJheSkge1xuICAgICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IGxpa2VzQXJyYXkubGVuZ3RoO1xuICAgICAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuX2lzTGlrZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGRlbGV0ZUxpa2UobGlrZXNBcnJheSkge1xuICAgICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IGxpa2VzQXJyYXkubGVuZ3RoO1xuICAgICAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuX2lzTGlrZWQgPSBmYWxzZTsgICAgXG4gICAgfVxuXG4gICAgZGVsZXRlQ2FyZCgpIHtcbiAgICAgICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5fY2FyZCA9IG51bGw7XG4gICAgfVxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9jYXJkSWQsIHRoaXMuX2lzTGlrZWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9idXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzLl9jYXJkSWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2NhcmRJbWFnZS5zcmMsIHRoaXMuX2NhcmRJbWFnZS5hbHQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2VuZXJhdGVDYXJkKCkge1xuICAgICAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcbiAgICAgICAgdGhpcy5fY2FyZE5hbWUgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19tZXN0bycpO1xuICAgICAgICB0aGlzLl9idXR0b25MaWtlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIik7XG4gICAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaGJpblwiKTtcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKTtcblxuICAgICAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICAgICBcblxuICAgICAgICBpZiAodGhpcy5fbGlrZXMuc29tZSgodXNlcikgPT4gdXNlci5faWQgPT09IHRoaXMuX293bmVySWQpKSB7XG4gICAgICAgICAgICB0aGlzLl9pc0xpa2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2lzTGlrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgICAgICB0aGlzLl9jYXJkTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgICAgIC8vdGhpcy5fY2FyZE5hbWUucXVlcnlTZWxlY3RvcignLmNhcmRfX21lc3RvJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICAgIH0gXG59IiwiLy9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgXG4gICAgb3BlbigpIHtcbiAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG4gIFxuICAgIGNsb3NlKCkge1xuICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cbiAgXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHsgXG4gICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7IFxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSBcbiAgICAgIHx8IFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7IFxuICAgICAgICB0aGlzLmNsb3NlKCk7IH0gfSkgXG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0gPSBoYW5kbGVTdWJtaXRGb3JtO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fZWRpdC1mb3JtJyk7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2J1dHRvblN1Ym1pdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlJyk7XG4gICAgdGhpcy5faW5pdGlhbEJ1dHRvblRleHQgPSB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQ7XG4gIH1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIC8v0YHQvtCx0LjRgNCw0LXRgiDQtNCw0L3QvdGL0LUg0LLRgdC10YUg0L/QvtC70LXQuSDRhNC+0YDQvNGLLlxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgXG4gIH1cbiAgXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8v0LTQvtC70LbQtdC9INC90LUg0YLQvtC70YzQutC+INC00L7QsdCw0LLQu9GP0YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC40LrQvtC90LrQtSDQt9Cw0LrRgNGL0YLQuNGPLCBcbiAgICAvL9C90L4g0Lgg0LTQvtCx0LDQstC70Y/RgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0LDQsdC80LjRgtCwINGE0L7RgNC80YsuXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuICBcbiAgY2xvc2UoKSB7XG4gICAgLy/Qv9GA0Lgg0LfQsNC60YDRi9GC0LjQuCDQv9C+0L/QsNC/0LAg0YTQvtGA0LzQsCDQtNC+0LvQttC90LAg0LXRidGRINC4INGB0LHRgNCw0YHRi9Cy0LDRgtGM0YHRj1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSB0aGlzLl9pbml0aWFsQnV0dG9uVGV4dDtcbiAgICB9XG4gIH1cbn1cblxuLy/QlNC70Y8g0LrQsNC20LTQvtCz0L4g0L/QvtC/0LDQv9CwINGB0L7Qt9C00LDQstCw0LnRgtC1INGB0LLQvtC5INGN0LrQt9C10LzQv9C70Y/RgCDQutC70LDRgdGB0LAgUG9wdXBXaXRoRm9ybS5cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbiAgICB0aGlzLl9wbGFjZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcGxhY2UnKTtcbiAgICB9XG4gIFxuICBvcGVuKGNhcmRJbWFnZVNyYywgY2FyZEltYWdlQWx0KSB7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gY2FyZEltYWdlU3JjO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGNhcmRJbWFnZUFsdDtcbiAgICB0aGlzLl9wbGFjZS50ZXh0Q29udGVudCA9IGNhcmRJbWFnZUFsdDtcbiAgXG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aNChb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gIH1cblxuICBoYW5kbGVTdWJtaXQoYWN0aW9uKSB7XG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IGFjdGlvbjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIoKTtcbiAgICB9KTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VyQWJvdXRTZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQWJvdXRTZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIC8v0LLQvtC30LLRgNCw0YnQsNC10YIg0L7QsdGK0LXQutGCINGBINC00LDQvdC90YvQvNC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuICAgIC8v0LrQvtCz0LTQsCDQtNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC90YPQttC90L4g0LHRg9C00LXRgiDQv9C+0LTRgdGC0LDQstC40YLRjCDQsiDRhNC+0YDQvNGDINC/0YDQuCDQvtGC0LrRgNGL0YLQuNC4LlxuICAgIGNvbnN0IHVzZXJJbmZvID0ge307XG4gICAgdXNlckluZm9bJ25hbWUnXSA9IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50O1xuICAgIHVzZXJJbmZvWydhYm91dCddID0gdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50O1xuICAgIHJldHVybiB1c2VySW5mbztcbiAgICAvLyByZXR1cm4ge1xuICAgIC8vICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXG4gICAgLy8gICBhYm91dDogdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50LFxuICAgIC8vICAgYXZhdGFyOiB0aGlzLl91c2VyQXZhdGFyLnNyYyxcbiAgICAvLyB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcbiAgICAvL9C/0YDQuNC90LjQvNCw0LXRgiDQvdC+0LLRi9C1INC00LDQvdC90YvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0Lgg0LTQvtCx0LDQstC70Y/QtdGCINC40YUg0L3QsCDRgdGC0YDQsNC90LjRhtGDXG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xuICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG4gIHNldFVzZXJBdmF0YXIoeyBhdmF0YXIgfSkge1xuICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aNChb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGjQoW9uZmlybWF0aW9uLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgeyBcbiAgdmFsaWRhdGlvbk9wdGlvbnMsXG4gIHBvcHVwRWRpdFByb2ZpbGVTZWxlY3RvcixcbiAgcG9wdXBGb3JtQXZhdGFyU2VsZWN0b3IsXG4gIHBvcHVwQWRkQ2FyZFNlbGVjdG9yLFxuICBwb3B1cENhcmRJbWFnZVNlbGVjdG9yLFxuICBwb3B1cEZvcm1Db25maXJtYXRpb25TZWxlY3RvcixcbiAgdXNlck5hbWVTZWxlY3RvcixcbiAgdXNlckFib3V0U2VsZWN0b3IsXG4gIHVzZXJBdmF0YXJTZWxlY3RvcixcbiAgYnV0dG9uRWRpdCxcbiAgYnV0dG9uQXZhdGFyLFxuICBidXR0b25BZGQsXG4gIGZvcm1Qcm9maWxlLFxuICBmb3JtQXZhdGFyLFxuICBmb3JtQ2FyZCxcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gIGNhcmRzQ29udGFpbmVyU2VsZWN0b3Jcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxubGV0IHVzZXJJZDtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTY0JyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICdhNzIxMmNiZS0zYjU0LTRiYjYtOTNkOC01Y2ZlMmEzNjI1YWQnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7IFxuXG4vLyDQtNC10LvQsNC10Lwg0LfQsNC/0YDQvtGBINC90LAg0YHQtdGA0LLQtdGAXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRDYXJkcygpXSlcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xuXG4gICAgY29uc29sZS5sb2coY2FyZHNDb250YWluZXIucmVuZGVySXRlbXMoY2FyZHMpKVxuXG4gICAgY29uc29sZS5sb2codXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpKVxuXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpOyAvLyDQv9C+0LvRg9GH0LDQtdC8INC00LDQvdC90YvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cbiAgICBjYXJkc0NvbnRhaW5lci5yZW5kZXJJdGVtcyhjYXJkcyk7IC8vINC60LDRgNGC0L7Rh9C60LhcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgfSlcblxuICBjb25zdCBoYW5kbGVPcGVuRm9ybVByb2ZpbGUgPSAoKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGNvbnNvbGUubG9nKCcxJyk7XG4gIGZvcm1Qcm9maWxlLm5hbWUudmFsdWUgPSBuYW1lO1xuICBjb25zb2xlLmxvZygnMicpO1xuICBmb3JtUHJvZmlsZS5hYm91dC52YWx1ZSA9IGFib3V0O1xuICBmb3JtUHJvZmlsZVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgcG9wdXBGb3JtUHJvZmlsZS5vcGVuKCk7XG59O1xuXG5jb25zdCBoYW5kbGVTdWJtaXRGb3JtUHJvZmlsZSA9ICh1c2VyRGF0YSkgPT4ge1xuICBwb3B1cEZvcm1Qcm9maWxlLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIC8vINC+0LHQvdC+0LLQu9GP0LXQvCDQtNCw0L3QvdGL0LUg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG4gIGFwaS5wYXRjaFVzZXJJbmZvKHVzZXJEYXRhKVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgICAgcG9wdXBGb3JtUHJvZmlsZS5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBGb3JtUHJvZmlsZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KVxufTtcblxuLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LXQulxuXG5jb25zdCBoYW5kbGVDYXJkQ2xpY2sgPSAoY2FyZEltYWdlU3JjLCBjYXJkSW1hZ2VBbHQpID0+IHtcbiAgcG9wdXBDYXJkSW1hZ2Uub3BlbihjYXJkSW1hZ2VTcmMsIGNhcmRJbWFnZUFsdCk7XG59O1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmREYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICB1c2VySWQsXG4gICAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgIHsgaGFuZGxlTGlrZUNsaWNrOiAoY2FyZElkLCBpc0xpa2VkKSA9PiB7XG4gICAgICAgIGlmIChpc0xpa2VkKSB7XG4gICAgICAgICAgYXBpLmRlbGV0ZUxpa2UoY2FyZElkKVxuICAgICAgICAgICAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgICAgICAgICAgIGNhcmQuZGVsZXRlTGlrZShjYXJkRGF0YS5saWtlcyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFwaS5wdXRMaWtlKGNhcmRJZClcbiAgICAgICAgICAgIC50aGVuKChjYXJkRGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjYXJkLnB1dExpa2UoY2FyZERhdGEubGlrZXMpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoY2FyZElkKSA9PiB7XG4gICAgICAgIHBvcHVwRm9ybUNvbmZpcm1hdGlvbi5vcGVuKCk7XG4gICAgICAgIHBvcHVwRm9ybUNvbmZpcm1hdGlvbi5oYW5kbGVTdWJtaXQoKCkgPT4ge1xuICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAgICAgICAgIC50aGVuKChjYXJkRGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoY2FyZERhdGEuX2lkKTtcbiAgICAgICAgICAgICAgcG9wdXBGb3JtQ29uZmlybWF0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sXG4gICk7XG4gIGNvbnN0IGNyZWF0ZWRDYXJkID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNyZWF0ZWRDYXJkO1xufTtcblxuXG5jb25zdCBoYW5kbGVPcGVuRm9ybUNhcmQgPSAoKSA9PiB7XG4gIGZvcm1DYXJkVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cEZvcm1DYXJkLm9wZW4oKTtcbn07XG5jb25zdCBoYW5kbGVTdWJtaXRGb3JtQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xuICBwb3B1cEZvcm1DYXJkLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5wb3N0Q2FyZChjYXJkRGF0YSlcbiAgICAudGhlbigoY2FyZERhdGEpID0+IHtcbiAgICAgIGNhcmRzQ29udGFpbmVyLmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkRGF0YSkpO1xuICAgICAgcG9wdXBGb3JtQ2FyZC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBGb3JtQ2FyZC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KVxufTtcblxuLy8g0J7QsdC90L7QstC70LXQvdC40LUg0LDQstCw0YLQsNGA0LBcblxuY29uc3QgaGFuZGxlT3BlbkZvcm1BdmF0YXIgPSAoKSA9PiB7XG4gIGZvcm1BdmF0YXJWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHBvcHVwRm9ybUF2YXRhci5vcGVuKCk7XG59O1xuXG5jb25zdCBoYW5kbGVTdWJtaXRGb3JtQXZhdGFyID0gKHVzZXJEYXRhKSA9PiB7XG4gIHBvcHVwRm9ybUF2YXRhci5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGkucGF0Y2hBdmF0YXIodXNlckRhdGEpXG4gICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhKTtcbiAgICAgIHBvcHVwRm9ybUF2YXRhci5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBGb3JtQXZhdGFyLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pXG59O1xuXG4vL9CU0LvRjyDQutCw0LbQtNC+0LPQviDQv9C+0L/QsNC/0LAg0YHQvtC30LTQsNCy0LDQudGC0LUg0YHQstC+0Lkg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCBQb3B1cFdpdGhGb3JtLlxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh1c2VyTmFtZVNlbGVjdG9yLCB1c2VyQWJvdXRTZWxlY3RvciwgdXNlckF2YXRhclNlbGVjdG9yKTtcbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gbmV3IFNlY3Rpb24oeyByZW5kZXJlcjogY3JlYXRlQ2FyZCB9LCBjYXJkc0NvbnRhaW5lclNlbGVjdG9yKTtcbmNvbnN0IHBvcHVwRm9ybVByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXRQcm9maWxlU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdEZvcm1Qcm9maWxlKTtcbmNvbnN0IHBvcHVwRm9ybUF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwRm9ybUF2YXRhclNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtQXZhdGFyKTtcbmNvbnN0IHBvcHVwRm9ybUNvbmZpcm1hdGlvbiA9IG5ldyBQb3B1cFdpdGjQoW9uZmlybWF0aW9uKHBvcHVwRm9ybUNvbmZpcm1hdGlvblNlbGVjdG9yKTtcbmNvbnN0IHBvcHVwRm9ybUNhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZENhcmRTZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybUNhcmQpO1xuY29uc3QgcG9wdXBDYXJkSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBDYXJkSW1hZ2VTZWxlY3Rvcik7XG5jb25zdCBmb3JtUHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25PcHRpb25zLCBmb3JtUHJvZmlsZSk7XG5jb25zdCBmb3JtQ2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25PcHRpb25zLCBmb3JtQ2FyZCk7XG5jb25zdCBmb3JtQXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbk9wdGlvbnMsIGZvcm1BdmF0YXIpOyBcblxuZm9ybVByb2ZpbGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuZm9ybUNhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuZm9ybUF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVPcGVuRm9ybVByb2ZpbGUpO1xuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlT3BlbkZvcm1DYXJkKTtcbmJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICBoYW5kbGVPcGVuRm9ybUF2YXRhcik7XG5cbnBvcHVwRm9ybVByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwRm9ybUF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBGb3JtQ29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEZvcm1DYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cENhcmRJbWFnZS5zZXRFdmVudExpc3RlbmVycygpOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uT3B0aW9ucywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gdmFsaWRhdGlvbk9wdGlvbnMuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25PcHRpb25zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSB2YWxpZGF0aW9uT3B0aW9ucy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHZhbGlkYXRpb25PcHRpb25zLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvbk9wdGlvbnMuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICAgKTsgXG4gICAgLy9jb25zb2xlLmxvZyhgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlOyBcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTsgXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfSAgXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9pc1ZhbGlkKGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7IFxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICB9XG4gIFxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG4gIFxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn0iLCJleHBvcnQgY29uc3QgdmFsaWRhdGlvbk9wdGlvbnMgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2VkaXQtZm9ybScsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zYXZlJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zYXZlX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2VkaXQtZm9ybV90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19zcGFuX2Vycm9yJ1xufTtcblxuLyog0LLRgdC1INC+0LrQvdCwLXBvcHVwICovXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZSc7IFxuZXhwb3J0IGNvbnN0IHBvcHVwQWRkQ2FyZFNlbGVjdG9yID0gJy5wb3B1cF90eXBlX25ldy1wbGFjZSc7IFxuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZEltYWdlU2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfaW1hZ2UnO1xuZXhwb3J0IGNvbnN0IHBvcHVwRm9ybUNvbmZpcm1hdGlvblNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2RlbGV0ZS1jYXJkJztcbmV4cG9ydCBjb25zdCBwb3B1cEZvcm1BdmF0YXJTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9hdmF0YXInO1xuXG4vKiDQv9GA0L7RhNC40LvRjCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gKi9cbmV4cG9ydCBjb25zdCB1c2VyTmFtZVNlbGVjdG9yID0gJy5wcm9maWxlX19uYW1lJztcbmV4cG9ydCBjb25zdCB1c2VyQWJvdXRTZWxlY3RvciA9ICcucHJvZmlsZV9fYWJvdXQnO1xuZXhwb3J0IGNvbnN0IHVzZXJBdmF0YXJTZWxlY3RvciA9ICcucHJvZmlsZV9fYXZhdGFyJztcblxuLyog0LrQvdC+0L/QutC4ICovXG5leHBvcnQgY29uc3QgYnV0dG9uRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgYnV0dG9uQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1idXR0b24nKTtcblxuLyog0YTQvtGA0LzQsCDQoNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjCAqL1xuLy9leHBvcnQgY29uc3QgZm9ybUVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9J2Zvcm0tZWRpdC1wcm9maWxlJ10nKTtcbmV4cG9ydCBjb25zdCBmb3JtUHJvZmlsZSA9IGRvY3VtZW50LmZvcm1zWydmb3JtLWVkaXQtcHJvZmlsZSddO1xuXG4vKiDRhNC+0YDQvNCwINCd0L7QstC+0LUg0LzQtdGB0YLQviAqL1xuLy9leHBvcnQgY29uc3QgZm9ybUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT0nZm9ybS1hZGQtY2FyZCddJyk7XG5leHBvcnQgY29uc3QgZm9ybUNhcmQgPSBkb2N1bWVudC5mb3Jtc1snZm9ybS1hZGQtY2FyZCddO1xuXG4vKiDRhNC+0YDQvNCwINCQ0LLQsNGC0LDRgCAqL1xuLy9leHBvcnQgY29uc3QgZm9ybUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPSdmb3JtLWF2YXRhciddJyk7XG5leHBvcnQgY29uc3QgZm9ybUF2YXRhciA9IGRvY3VtZW50LmZvcm1zWydmb3JtLWF2YXRhciddO1xuXG4vKiB0ZW1wbGF0ZSAqL1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gJyNjYXJkLXRlbXBsYXRlJztcblxuLyog0LrQvtC90YLQtdC50L3QtdGAINC00LvRjyDQutCw0YDRgtC+0YfQtdC6ICovXG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXJTZWxlY3RvciA9ICcuY2FyZHMnOyAiXSwibmFtZXMiOlsiQXBpIiwiX3JlZiIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJrZXkiLCJ2YWx1ZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJjb25jYXQiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsIl9yZWYyIiwibmFtZSIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJfcmVmMyIsImF2YXRhciIsIl9yZWY0IiwibGluayIsImNhcmRJZCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIml0ZW1zIiwiX3RoaXMiLCJmb3JFYWNoIiwiaXRlbSIsImFwcGVuZCIsImVsZW1lbnQiLCJwcmVwZW5kIiwiQ2FyZCIsImNhcmREYXRhIiwidXNlcklkIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiX25hbWUiLCJfbGluayIsIl9saWtlcyIsImxpa2VzIiwiX2NhcmRJZCIsIl9pZCIsIl9vd25lcklkIiwib3duZXIiLCJfdXNlcklkIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJsaWtlc0FycmF5IiwiX2xpa2VDb3VudGVyIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJfYnV0dG9uTGlrZSIsImNsYXNzTGlzdCIsImFkZCIsIl9pc0xpa2VkIiwicmVtb3ZlIiwiX2NhcmQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2J1dHRvbkRlbGV0ZSIsIl9jYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJfdGhpczIiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZE5hbWUiLCJzb21lIiwidXNlciIsIl9zZXRFdmVudExpc3RlbmVycyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJoYW5kbGVTdWJtaXRGb3JtIiwiY2FsbCIsIl9oYW5kbGVTdWJtaXRGb3JtIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybSIsIl9idXR0b25TdWJtaXQiLCJfaW5pdGlhbEJ1dHRvblRleHQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwiX3RoaXMzIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJpc0xvYWRpbmciLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl9wbGFjZSIsImNhcmRJbWFnZVNyYyIsImNhcmRJbWFnZUFsdCIsIlBvcHVwV2l0aNChb25maXJtYXRpb24iLCJhY3Rpb24iLCJfc3VibWl0SGFuZGxlciIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJBYm91dFNlbGVjdG9yIiwidXNlckF2YXRhclNlbGVjdG9yIiwiX3VzZXJOYW1lIiwiX3VzZXJBYm91dCIsIl91c2VyQXZhdGFyIiwidXNlckluZm8iLCJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGlvbk9wdGlvbnMiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIkFycmF5IiwiZnJvbSIsIl9idXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiX2lzVmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JtU2VsZWN0b3IiLCJidXR0b25FZGl0IiwiYnV0dG9uQWRkIiwiYnV0dG9uQXZhdGFyIiwiZm9ybVByb2ZpbGUiLCJmb3JtcyIsImZvcm1DYXJkIiwiZm9ybUF2YXRhciIsImFwaSIsImF1dGhvcml6YXRpb24iLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldENhcmRzIiwidXNlckRhdGEiLCJjYXJkcyIsImNvbnNvbGUiLCJsb2ciLCJjYXJkc0NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwic2V0VXNlckluZm8iLCJjYXRjaCIsImVyciIsInBvcHVwQ2FyZEltYWdlIiwib3BlbiIsImNyZWF0ZUNhcmQiLCJjYXJkIiwiaXNMaWtlZCIsImRlbGV0ZUxpa2UiLCJwdXRMaWtlIiwicG9wdXBGb3JtQ29uZmlybWF0aW9uIiwiaGFuZGxlU3VibWl0IiwiZGVsZXRlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsInBvcHVwRm9ybVByb2ZpbGUiLCJyZW5kZXJMb2FkaW5nIiwicGF0Y2hVc2VySW5mbyIsImZpbmFsbHkiLCJwb3B1cEZvcm1BdmF0YXIiLCJwYXRjaEF2YXRhciIsInNldFVzZXJBdmF0YXIiLCJwb3B1cEZvcm1DYXJkIiwicG9zdENhcmQiLCJhZGRJdGVtIiwiZm9ybVByb2ZpbGVWYWxpZGF0b3IiLCJmb3JtQ2FyZFZhbGlkYXRvciIsImZvcm1BdmF0YXJWYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiX3VzZXJJbmZvJGdldFVzZXJJbmZvIiwicmVzZXRWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9