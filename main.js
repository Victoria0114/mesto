(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var n=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var n,r;return n=e,(r=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=t.link,this._name=t.name,this._templateSelector=n,this._handleCardClick=r}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_like",value:function(){this._buttonLike.classList.toggle("card__like_active")}},{key:"_trash",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListeners",value:function(){var e=this;this._buttonLike.addEventListener("click",(function(){e._like()})),this._buttonDelete.addEventListener("click",(function(){e._trash()})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._link,e._name)}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardName=this._element.querySelector(".card__mesto"),this._buttonLike=this._element.querySelector(".card__like"),this._buttonDelete=this._element.querySelector(".card__trashbin"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardName.textContent=this._name,this._setEventListeners(),this._element}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===s(o)?o:String(o)),r)}var o}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleSubmitForm=t,n._inputList=n._popup.querySelectorAll(".popup__edit-form"),n._form=n._popup.querySelector(".popup__form"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;f(y(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmitForm(e._getInputValues())}))}},{key:"close",value:function(){f(y(u.prototype),"close",this).call(this),this._form.reset()}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._image=t._popup.querySelector(".popup__image"),t._place=t._popup.querySelector(".popup__place"),t}return t=u,(n=[{key:"open",value:function(e,t){this._image.src=e,this._image.alt=t,this._place.textContent=t,d(_(u.prototype),"open",this).call(this)}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(l);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===g(o)?o:String(o)),r)}var o}var E=function(){function e(t){var n=t.userNameSelector,r=t.userJobSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userJob=document.querySelector(r)}var t,n;return t=e,n=[{key:"getUserInfo",value:function(){var e={};return e.name=this._userName.textContent,e.job=this._userJob.textContent,e}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this._userName.textContent=t,this._userJob.textContent=n}}],n&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}var O=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}},{key:"_enableButton",value:function(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled")}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():this._enableButton()}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState()}))})),this._formElement.addEventListener("submit",(function(e){e.preventDefault()}))}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),P={formSelector:".popup__form",inputSelector:".popup__edit-form",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"popup__edit-form_type_error",errorClass:"popup__span_error"},C=document.querySelector(".profile__edit-button"),L=document.querySelector(".profile__add-button"),I=document.querySelector('[name="form-edit-profile"]'),q=document.querySelector('[name="form-add-card"]'),B=new O(P,I);B.enableValidation();var T=new O(P,q);T.enableValidation();var x=new E({userNameSelector:".profile__name",userJobSelector:".profile__about"}),R=function(e,t){J.open(e,t)},V=function(e){D.addItem(function(e){return new i(e,"#card-template",R).generateCard()}(e))},D=new n({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:V},".cards");D.renderItems(),C.addEventListener("click",(function(){var e=x.getUserInfo(),t=e.name,n=e.job;I.name.value=t,I.job.value=n,B.resetValidation(),N.open()})),L.addEventListener("click",(function(){T.resetValidation(),A.open()}));var N=new m(".popup_type_edit-profile",(function(e){x.setUserInfo(e),N.close()}));N.setEventListeners();var A=new m(".popup_type_new-place",(function(e){var t=e.name,n=e.link;V({name:t,link:n}),A.close()}));A.setEventListeners();var J=new S(".popup_type_image");J.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxTQUNORixLQUFNLGtGQzZEVnBCLFNBQVVtSSxHRHRCMEIsVUN5QnRDQyxFQUFVSSxjQUtWZCxFQUEyQjFGLGlCQUFpQixTQXJEbEIsV0FDeEIsSUFBQXlHLEVBQW9CckQsRUFBU3NELGNBQXRCcEgsRUFBSW1ILEVBQUpuSCxLQUFNZ0UsRUFBR21ELEVBQUhuRCxJQUNic0MsRUFBZ0J0RyxLQUFLYixNQUFRYSxFQUM3QnNHLEVBQWdCdEMsSUFBSTdFLE1BQVE2RSxFQUM1QndDLEVBQXFCYSxrQkFDckJDLEVBQWlCVixNQUNuQixJQWtEQVAsRUFBdUIzRixpQkFBaUIsU0F6Q2xCLFdBQ3BCZ0csRUFBa0JXLGtCQUNsQkUsRUFBYVgsTUFDZixJQXlDQSxJQUFNVSxFQUFtQixJQUFJdEYsRUR4RFcsNEJDTVosU0FBQ3RDLEdBQzNCb0UsRUFBUzBELFlBQVk5SCxHQUNyQjRILEVBQWlCekYsT0FDbkIsSUFnREF5RixFQUFpQkcsb0JBR2pCLElBQU1GLEVBQWUsSUFBSXZGLEVEM0RXLHlCQ2lCWCxTQUFIekQsR0FBMkIsSUFBaEJ5QixFQUFJekIsRUFBVnlCLEtBQVlGLEVBQUl2QixFQUFKdUIsS0FDckMrRyxFQUFXLENBQUM3RyxLQUFBQSxFQUFNRixLQUFBQSxJQUNsQnlILEVBQWExRixPQUNmLElBd0NBMEYsRUFBYUUsb0JBR2IsSUFBTWQsRUFBaUIsSUFBSXZELEVEOURXLHFCQytEdEN1RCxFQUFlYyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9wb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy/QodCy0L7QudGB0YLQstC+IGl0ZW1zIOKAlCDRjdGC0L4g0LzQsNGB0YHQuNCyINC00LDQvdC90YvRhSwgXG4vL9C60L7RgtC+0YDRi9C1INC90YPQttC90L4g0LTQvtCx0LDQstC40YLRjCDQvdCwINGB0YLRgNCw0L3QuNGG0YMg0L/RgNC4INC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNC4INC60LvQsNGB0YHQsC4gXG4vL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgICAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIH1cblxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmNhcmQnKVxuICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICAgIH1cblxuICAgIF9saWtlKCkge1xuICAgICAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcbiAgICB9XG4gICAgX3RyYXNoKCkge1xuICAgICAgICAvL3RoaXMuX2J1dHRvbkRlbGV0ZS5jbG9zZXN0KCcuY2FyZCcpLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9saWtlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9idXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3RyYXNoKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XG4gICAgICAgIHRoaXMuX2NhcmROYW1lID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbWVzdG8nKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlXCIpO1xuICAgICAgICB0aGlzLl9idXR0b25EZWxldGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hiaW5cIik7XG5cbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgICAgICB0aGlzLl9jYXJkTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgICAgIC8vdGhpcy5fY2FyZE5hbWUucXVlcnlTZWxlY3RvcignLmNhcmRfX21lc3RvJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICAgIH0gXG59IiwiLy9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgXG4gICAgb3BlbigpIHtcbiAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG4gIFxuICAgIGNsb3NlKCkge1xuICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cbiAgXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHsgXG4gICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7IFxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSBcbiAgICAgIHx8IFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7IFxuICAgICAgICB0aGlzLmNsb3NlKCk7IH0gfSkgXG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL3BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0gPSBoYW5kbGVTdWJtaXRGb3JtO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fZWRpdC1mb3JtJyk7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICB9XG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAvL9GB0L7QsdC40YDQsNC10YIg0LTQsNC90L3Ri9C1INCy0YHQtdGFINC/0L7Qu9C10Lkg0YTQvtGA0LzRiy5cbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIFxuICB9XG4gIFxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL9C00L7Qu9C20LXQvSDQvdC1INGC0L7Qu9GM0LrQviDQtNC+0LHQsNCy0LvRj9GC0Ywg0L7QsdGA0LDQsdC+0YLRh9C40Log0LrQu9C40LrQsCDQuNC60L7QvdC60LUg0LfQsNC60YDRi9GC0LjRjywgXG4gICAgLy/QvdC+INC4INC00L7QsdCw0LLQu9GP0YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdCw0LHQvNC40YLQsCDRhNC+0YDQvNGLLlxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cbiAgXG4gIGNsb3NlKCkge1xuICAgIC8v0L/RgNC4INC30LDQutGA0YvRgtC40Lgg0L/QvtC/0LDQv9CwINGE0L7RgNC80LAg0LTQvtC70LbQvdCwINC10YnRkSDQuCDRgdCx0YDQsNGB0YvQstCw0YLRjNGB0Y9cbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxufVxuXG4vL9CU0LvRjyDQutCw0LbQtNC+0LPQviDQv9C+0L/QsNC/0LAg0YHQvtC30LTQsNCy0LDQudGC0LUg0YHQstC+0Lkg0Y3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCBQb3B1cFdpdGhGb3JtLlxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vcG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuICAgIHRoaXMuX3BsYWNlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19wbGFjZScpO1xuICAgIH1cbiAgXG4gIG9wZW4oY2FyZEltYWdlU3JjLCBjYXJkSW1hZ2VBbHQpIHtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBjYXJkSW1hZ2VTcmM7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gY2FyZEltYWdlQWx0O1xuICAgIHRoaXMuX3BsYWNlLnRleHRDb250ZW50ID0gY2FyZEltYWdlQWx0O1xuICBcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VySm9iU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgLy/QstC+0LfQstGA0LDRidCw0LXRgiDQvtCx0YrQtdC60YIg0YEg0LTQsNC90L3Ri9C80Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXG4gICAgLy/QutC+0LPQtNCwINC00LDQvdC90YvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0L3Rg9C20L3QviDQsdGD0LTQtdGCINC/0L7QtNGB0YLQsNCy0LjRgtGMINCyINGE0L7RgNC80YMg0L/RgNC4INC+0YLQutGA0YvRgtC40LguXG4gICAgY29uc3QgdXNlckluZm8gPSB7fTtcbiAgICB1c2VySW5mb1snbmFtZSddID0gdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQ7XG4gICAgdXNlckluZm9bJ2pvYiddID0gdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudDtcbiAgICByZXR1cm4gdXNlckluZm87XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XG4gICAgLy/Qv9GA0LjQvdC40LzQsNC10YIg0L3QvtCy0YvQtSDQtNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC4INC00L7QsdCw0LLQu9GP0LXRgiDQuNGFINC90LAg0YHRgtGA0LDQvdC40YbRg1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl91c2VySm9iLnRleHRDb250ZW50ID0gam9iO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25PcHRpb25zLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uT3B0aW9ucy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvbk9wdGlvbnMuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25PcHRpb25zLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvbk9wdGlvbnMuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSB2YWxpZGF0aW9uT3B0aW9ucy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgICApOyBcbiAgICAvL2NvbnNvbGUubG9nKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYClcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7IFxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpOyBcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9ICBcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2lzVmFsaWQoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHsgXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9pc1ZhbGlkKGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gIH1cbiAgXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cbiAgXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufSIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxuICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ9CR0LDQudC60LDQuycsXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4gICAgfVxuXTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25PcHRpb25zID0ge1xuICAgIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gICAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9fZWRpdC1mb3JtJyxcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZScsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zYXZlX2Rpc2FibGVkJyxcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9fZWRpdC1mb3JtX3R5cGVfZXJyb3InLFxuICAgIGVycm9yQ2xhc3M6ICdwb3B1cF9fc3Bhbl9lcnJvcidcbn07XG5cbi8qINCy0YHQtSDQvtC60L3QsC1wb3B1cCAqL1xuLy9leHBvcnQgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwXCIpO1xuLy9leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiKTtcbi8vZXhwb3J0IGNvbnN0IHBvcHVwQWRkQ2FyZFNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX25ldy1wbGFjZVwiKTtcbi8vZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZEltYWdlU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9pbWFnZScpO1xuXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZSc7IFxuZXhwb3J0IGNvbnN0IHBvcHVwQWRkQ2FyZFNlbGVjdG9yID0gJy5wb3B1cF90eXBlX25ldy1wbGFjZSc7IFxuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZEltYWdlU2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfaW1hZ2UnO1xuXG4vKiDQutC90L7Qv9C60Lgg0L7RgtC60YDRi9GC0LjRjyAqL1xuZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5FZGl0UHJvZmlsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBidXR0b25PcGVuQWRkQ2FyZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuXG4vKiDRhNC+0YDQvNCwINCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINC/0YDQvtGE0LjQu9GMICovXG4vL2V4cG9ydCBjb25zdCBmb3JtRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybS1lZGl0LXByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgZm9ybUVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9XCJmb3JtLWVkaXQtcHJvZmlsZVwiXScpO1xuXG5cbi8qINGE0L7RgNC80LAg0J3QvtCy0L7QtSDQvNC10YHRgtC+ICovXG4vL2V4cG9ydCBjb25zdCBmb3JtQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtLWFkZC1jYXJkXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1DYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW25hbWU9XCJmb3JtLWFkZC1jYXJkXCJdJyk7XG4vKiB0ZW1wbGF0ZSAqL1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gJyNjYXJkLXRlbXBsYXRlJztcblxuLyog0LrQvtC90YLQtdC50L3QtdGAINC00LvRjyDQutCw0YDRgtC+0YfQtdC6ICovXG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXJTZWxlY3RvciA9ICcuY2FyZHMnOyAiLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgeyBcbiAgaW5pdGlhbENhcmRzLCBcbiAgdmFsaWRhdGlvbk9wdGlvbnMsXG4gIHBvcHVwRWRpdFByb2ZpbGVTZWxlY3RvcixcbiAgcG9wdXBBZGRDYXJkU2VsZWN0b3IsXG4gIHBvcHVwQ2FyZEltYWdlU2VsZWN0b3IsXG4gIGJ1dHRvbk9wZW5FZGl0UHJvZmlsZVBvcHVwLFxuICBidXR0b25PcGVuQWRkQ2FyZFBvcHVwLFxuICBmb3JtRWRpdFByb2ZpbGUsXG4gIGZvcm1DYXJkLFxuICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgY2FyZHNDb250YWluZXJTZWxlY3RvclxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuXG4vLyDQstCw0LvQuNC00LDRgtC+0YAg0YTQvtGA0LzRiyBcItCg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINC/0YDQvtGE0LjQu9GMXCJcbmNvbnN0IGZvcm1Qcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRpb25PcHRpb25zLFxuICBmb3JtRWRpdFByb2ZpbGVcbiAgKTtcbmZvcm1Qcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy8g0LLQsNC70LjQtNCw0YLQvtGAINGE0L7RgNC80YsgXCLQndC+0LLQvtC1INC80LXRgdGC0L5cIlxuY29uc3QgZm9ybUNhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uT3B0aW9ucywgZm9ybUNhcmQpO1xuZm9ybUNhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC1INC/0YDQvtGE0LjQu9GPXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIHVzZXJOYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fbmFtZScsXG4gIHVzZXJKb2JTZWxlY3RvcjogJy5wcm9maWxlX19hYm91dCdcbn0pO1xuXG4vLyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5jb25zdCBoYW5kbGVFZGl0UHJvZmlsZSA9ICgpID0+IHtcbiAgY29uc3Qge25hbWUsIGpvYn0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBmb3JtRWRpdFByb2ZpbGUubmFtZS52YWx1ZSA9IG5hbWU7XG4gIGZvcm1FZGl0UHJvZmlsZS5qb2IudmFsdWUgPSBqb2I7XG4gIGZvcm1Qcm9maWxlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcbn07XG5cbi8vINC+0LHRgNCw0LHQvtGC0YfQuNC6IHN1Ym1pdCDQv9GA0L7RhNC40LvRj1xuY29uc3QgaGFuZGxlU3VibWl0UHJvZmlsZSA9IChkYXRhKSA9PiB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICBwb3B1cEVkaXRQcm9maWxlLmNsb3NlKCk7XG59O1xuXG4vLyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBoYW5kbGVBZGRDYXJkID0gKCkgPT4ge1xuICBmb3JtQ2FyZFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgcG9wdXBBZGRDYXJkLm9wZW4oKTtcbn07XG5cbi8vINC+0LHRgNCw0LHQvtGC0YfQuNC6IHN1Ym1pdCDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBoYW5kbGVTdWJtaXRDYXJkID0gKHtuYW1lOiBuYW1lLCBsaW5rfSkgPT4ge1xuICByZW5kZXJDYXJkKHtuYW1lLCBsaW5rfSk7XG4gIHBvcHVwQWRkQ2FyZC5jbG9zZSgpO1xufTtcblxuLy8g0L7QsdGA0LDQsdC+0YLRh9C40Log0LrQu9C40LrQsCDQv9C+INC60LDRgNGC0LjQvdC60LUg0LrQsNGA0YLQvtGH0LrQuCAo0L7RgtC60YDRi9GC0YwpXG5jb25zdCBoYW5kbGVDYXJkQ2xpY2sgPSAoY2FyZEltYWdlU3JjLCBjYXJkSW1hZ2VBbHQpID0+IHtcbiAgcG9wdXBDYXJkSW1hZ2Uub3BlbihjYXJkSW1hZ2VTcmMsIGNhcmRJbWFnZUFsdCk7XG59O1xuXG4vLyDRgdC+0LfQtNCw0YLRjCDQvtGC0LTQtdC70YzQvdGD0Y4g0LrQsNGA0YLQvtGH0LrRg1xuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBjYXJkVGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKTtcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59O1xuXG4vLyDQvtGC0YDQuNGB0L7QstCw0YLRjCDQs9C+0YLQvtCy0YPRjiDQutCw0YDRgtC+0YfQutGDXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEpID0+IHtcbiAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XG59O1xuXG4vLyDQvtGC0YDQuNGB0L7QstCw0YLRjCDQstGB0LUg0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICBpdGVtczogaW5pdGlhbENhcmRzLFxuICByZW5kZXJlcjogcmVuZGVyQ2FyZFxufSwgY2FyZHNDb250YWluZXJTZWxlY3Rvcik7XG5cbmNhcmRzTGlzdC5yZW5kZXJJdGVtcygpO1xuXG4vLyDRgdC70YPRiNCw0YLQtdC70LhcblxuLy8g0LrQvdC+0L/QutCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINC/0YDQvtGE0LjQu9GMXG5idXR0b25PcGVuRWRpdFByb2ZpbGVQb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUVkaXRQcm9maWxlKTtcblxuLy8g0LrQvdC+0L/QutCwINC00L7QsdCw0LLQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRg1xuYnV0dG9uT3BlbkFkZENhcmRQb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUFkZENhcmQpO1xuXG4vLyBzdWJtaXQg0L/RgNC+0YTQuNC70Y9cbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXRQcm9maWxlU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdFByb2ZpbGUpO1xucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBzdWJtaXQg0LTQvtCx0LDQstC7INC60LDRgNGCXG5jb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZENhcmRTZWxlY3RvciwgaGFuZGxlU3VibWl0Q2FyZCk7XG5wb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8g0LfQsNC60YDRi9GC0LhlINC60LDRgNGC0LjQvdC60Lgg0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgcG9wdXBDYXJkSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBDYXJkSW1hZ2VTZWxlY3Rvcik7XG5wb3B1cENhcmRJbWFnZS5zZXRFdmVudExpc3RlbmVycygpOyJdLCJuYW1lcyI6WyJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwia2V5IiwidmFsdWUiLCJfdGhpcyIsImZvckVhY2giLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJDYXJkIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJfbGluayIsImxpbmsiLCJfbmFtZSIsIm5hbWUiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2J1dHRvbkxpa2UiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfZWxlbWVudCIsInJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfbGlrZSIsIl9idXR0b25EZWxldGUiLCJfdHJhc2giLCJfY2FyZEltYWdlIiwiX2dldFRlbXBsYXRlIiwiX2NhcmROYW1lIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiaGFuZGxlU3VibWl0Rm9ybSIsImNhbGwiLCJfaGFuZGxlU3VibWl0Rm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2Zvcm0iLCJfdGhpczIiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwiX3RoaXMzIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl9wbGFjZSIsImNhcmRJbWFnZVNyYyIsImNhcmRJbWFnZUFsdCIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VySm9iIiwidXNlckluZm8iLCJfcmVmMiIsImpvYiIsIkZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0aW9uT3B0aW9ucyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiQXJyYXkiLCJmcm9tIiwiX2J1dHRvbkVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInNvbWUiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiX2lzVmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JtU2VsZWN0b3IiLCJidXR0b25PcGVuRWRpdFByb2ZpbGVQb3B1cCIsImJ1dHRvbk9wZW5BZGRDYXJkUG9wdXAiLCJmb3JtRWRpdFByb2ZpbGUiLCJmb3JtQ2FyZCIsImZvcm1Qcm9maWxlVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImZvcm1DYXJkVmFsaWRhdG9yIiwicG9wdXBDYXJkSW1hZ2UiLCJvcGVuIiwicmVuZGVyQ2FyZCIsImNhcmRzTGlzdCIsImFkZEl0ZW0iLCJnZW5lcmF0ZUNhcmQiLCJjcmVhdGVDYXJkIiwicmVuZGVySXRlbXMiLCJfdXNlckluZm8kZ2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsInJlc2V0VmFsaWRhdGlvbiIsInBvcHVwRWRpdFByb2ZpbGUiLCJwb3B1cEFkZENhcmQiLCJzZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==